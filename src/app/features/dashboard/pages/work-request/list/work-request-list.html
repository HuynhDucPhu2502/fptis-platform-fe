<div class="p-8 max-w-7xl mx-auto">
  <!-- Header with Create Button -->
  <div class="flex justify-between items-center mb-8">
    <div>
      <h1 class="text-4xl font-bold mb-3">
        <span class="text-gray-800">Danh Sách</span>
        <span class="bg-gradient-to-r from-orange-500 to-orange-600 bg-clip-text text-transparent">
          Yêu Cầu
        </span>
      </h1>
      <p class="text-gray-600 text-lg">Xem và quản lý các yêu cầu nghỉ phép và làm từ xa</p>
    </div>

    <!-- Create Request Button -->
    <a
      routerLink="/dashboard/work-request/form"
      class="px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold rounded-xl shadow-lg shadow-orange-200 hover:shadow-xl hover:shadow-orange-300 transition-all duration-300 transform hover:scale-105 flex items-center gap-2"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
      </svg>
      Tạo yêu cầu mới
    </a>
  </div>

  <!-- Loading State -->
  @if (loading) {
  <div class="flex justify-center items-center py-20">
    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"></div>
  </div>
  }

  <!-- Requests List -->
  @if (!loading && requests.length > 0) {
  <div class="space-y-4">
    @for (request of requests; track request.id) {
    <div
      class="bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-all duration-300"
    >
      <div class="flex justify-between items-start">
        <!-- Left Side: Request Info -->
        <div class="flex-1">
          <div class="flex items-center gap-3 mb-3">
            <!-- Type Badge -->
            <span
              class="px-3 py-1 rounded-lg text-sm font-semibold"
              [class.bg-blue-100]="request.workRequestType === 'REMOTE'"
              [class.text-blue-700]="request.workRequestType === 'REMOTE'"
              [class.bg-purple-100]="request.workRequestType === 'LEAVE'"
              [class.text-purple-700]="request.workRequestType === 'LEAVE'"
            >
              @if (request.workRequestType === 'LEAVE') {
              <svg
                class="w-4 h-4 inline-block mr-1"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                />
              </svg>
              } @else {
              <svg
                class="w-4 h-4 inline-block mr-1"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                />
              </svg>
              }
              {{ getTypeText(request.workRequestType) }}
            </span>

            <!-- Status Badge -->
            <span
              class="px-3 py-1 rounded-lg text-sm font-semibold"
              [ngClass]="getStatusClass(request.workRequestStatus)"
            >
              {{ getStatusText(request.workRequestStatus) }}
            </span>
          </div>

          <h3 class="text-lg font-semibold text-gray-800 mb-2">{{ request.reason }}</h3>

          <div class="flex flex-wrap gap-4 text-sm text-gray-600">
            <!-- Duration -->
            <div class="flex items-center gap-1">
              <svg
                class="w-4 h-4 text-gray-400"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                />
              </svg>
              <span>{{ formatDate(request.fromDate) }} - {{ formatDate(request.toDate) }}</span>
            </div>
          </div>

          <!-- Attendance Stats -->
          @if (request.totalAttendance > 0) {
          <div class="mt-3 flex gap-4 text-xs text-gray-500">
            <span>Tổng buổi: {{ request.totalAttendance }}</span>
            <span>Đúng giờ: {{ (request.onTimeRatio * 100).toFixed(0) }}%</span>
            <span>Ra sớm: {{ (request.earlyCheckoutRatio * 100).toFixed(0) }}%</span>
          </div>
          }

          <!-- Admin Note -->
          @if (request.workRequestStatus === 'REJECTED' && request.adminNote) {
          <div class="mt-2 p-2 bg-red-50 border border-red-200 rounded text-sm text-red-700">
            <strong>Lý do từ chối:</strong> {{ request.adminNote }}
          </div>
          }

          <!-- Approver Name -->
          @if (request.workRequestStatus === 'APPROVED' && request.approverName) {
          <div class="mt-2 text-sm text-green-600">
            <strong>Người duyệt:</strong> {{ request.approverName }}
          </div>
          }
        </div>
      </div>
    </div>
    }
  </div>
  }

  <!-- Empty State -->
  @if (!loading && requests.length === 0) {
  <div class="text-center py-20">
    <svg
      class="w-24 h-24 mx-auto text-gray-300 mb-4"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
      />
    </svg>
    <h3 class="text-xl font-semibold text-gray-700 mb-2">Chưa có yêu cầu nào</h3>
    <p class="text-gray-500 mb-6">Bạn chưa tạo yêu cầu nghỉ phép hoặc làm từ xa nào</p>
    <a
      routerLink="/dashboard/work-request/form"
      class="inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold rounded-xl shadow-lg shadow-orange-200 transition-all duration-300"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
      </svg>
      Tạo yêu cầu đầu tiên
    </a>
  </div>
  }
</div>
